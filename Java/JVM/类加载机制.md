# 类加载机制

类是在运行期间第一次使用时动态加载的，而不是一次性加载所有类。

## 类的生命周期

![title](https://raw.githubusercontent.com/pallcard/noteImg/master/noteImg/2020/03/17/1584430862257-1584430862260.png)

## 类加载过程
包含了加载、验证、准备、解析和初始化这 5 个阶段。

### 1.加载
加载过程完成以下三件事：
1. 通过类的完全限定名称获取定义该类的二进制字节流。
2. 将该字节流表示的静态存储结构转换为方法区的运行时存储结构。
3. 在内存中生成一个代表该类的 Class 对象，作为方法区中该类各种数据的访问入口。

### 2.验证

确保 Class 文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全。

### 3. 准备

类变量是被 static 修饰的变量，准备阶段为类变量分配内存并设置初始值，使用的是方法区的内存
```
public static int value = 123;
```
如果类变量是常量，那么它将初始化为表达式所定义的值而不是 0。
```
public final static int value = 123;
```




