# Java内存模型
Java 内存模型试图屏蔽各种硬件和操作系统的内存访问差异，以实现让 Java 程序在各种平台下都能达到一致的内存访问效果。

## 主内存与工作内存
所有的变量都存储在主内存中，每个线程还有自己的工作内存，工作内存存储在高速缓存或者寄存器中，保存了该线程使用的变量的主内存副本拷贝。

线程只能直接操作工作内存中的变量，不同线程之间的变量值传递需要通过主内存来完成。

![title](https://raw.githubusercontent.com/pallcard/noteImg/master/noteImg/2020/03/22/1584859773466-1584859773471.png)

## 内存间交互操作

![title](https://raw.githubusercontent.com/pallcard/noteImg/master/noteImg/2020/03/22/1584859825528-1584859825530.png)

lock(锁定)：**作用于主内存**，它把一个**变量**标记为一条线程独占状态；
read(读取)：**作用于主内存**，它把变量值从主内存传送到线程的工作内存中，以便随后的load动作使用；
load(载入)：作用于工作内存，它把read操作的值放入工作内存中的变量副本中；
use(使用)：作用于工作内存，它把工作内存中的值传递给执行引擎，每当虚拟机遇到一个需要使用这个变量的指令时候，将会执行这个动作；
assign(赋值)：作用于工作内存，它把从执行引擎获取的值赋值给工作内存中的变量，每当虚拟机遇到一个给变量赋值的指令时候，执行该操作；
store(存储)：作用于工作内存，它把工作内存中的一个变量传送给主内存中，以备随后的write操作使用；
write(写入)：**作用于主内存**，它把store传送值放到主内存中的变量中。
unlock(解锁)：**作用于主内存**，它将一个处于锁定状态的**变量**释放出来，释放后的变量才能够被其他线程锁定；

参考：
https://blog.csdn.net/l1394049664/article/details/81475380










